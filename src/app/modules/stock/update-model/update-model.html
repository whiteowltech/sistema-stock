<!-- new-model.html (simplificado y legible) -->
@if (modelo) {
<div class="new-model">

  <!-- Título -->
  <h2>
    Actualización de {{ modelo.nombre }}
  </h2>

  <!-- Alertas -->
  <div *ngIf="successMsg" class="alert success">{{ successMsg }}</div>
  <div *ngIf="errorMsg" class="alert error">{{ errorMsg }}</div>

  <form (ngSubmit)="onSubmit()">

    <!-- Datos generales -->
    <section class="card">
      <div class="field">
        <label for="nombre">Nombre del modelo</label>
        <input id="nombre" type="text" [(ngModel)]="modelo.nombre" name="nombre" required maxlength="80"
          placeholder="Ej: iPhone 12" />
      </div>

      <div class="field">
        <label for="comentario">Comentario (opcional)</label>
        <textarea id="comentario" [(ngModel)]="modelo.comentario" name="comentario" maxlength="300" rows="2"
          placeholder="Ej: Alta inicial, lote 123"></textarea>
      </div>

      <div class="field">
        <label>Tipo de movimiento</label>
        <select [(ngModel)]="tipoMovimiento" name="tipoMovimiento">
          <option value="ingreso">Ingreso</option>
          <option value="egreso">Egreso</option>
        </select>
      </div>
    </section>

    <!-- Módulos -->
    <section class="card">
      <h3>Recursos</h3>
      <div class="rows">
        <div class="row labels-row">
          <div class="label">Items</div>
          <div class="label">Cantidad</div>
          <div class="label">Precio costo</div>
          <div class="label">Precio venta</div>
        </div>
        <div *ngFor="let item of modelo.items; let i = index" class="row">
          <div class="label">
            {{ item.tipo === 'con_borde' ? 'Módulo con marco' :
            item.tipo === 'sin_borde' ? 'Módulo sin marco' :
            item.tipo === 'plaqueta_carga' ? 'Plaqueta de carga' : 'Tapa trasera' }}
          </div>
          <input type="number" [(ngModel)]="item.cantidad" name="cantidad{{i}}" min="0" placeholder="Cantidad" />
          <input type="number" [(ngModel)]="item.precio_costo" name="precio_costo{{i}}" min="0" step="0.01"
            placeholder="Precio costo" />
          <input type="number" [(ngModel)]="item.precio_venta" name="precio_venta{{i}}" min="0" step="0.01"
            placeholder="Precio venta" />
        </div>
      </div>
    </section>
    <!-- Acciones -->
    <div class="actions">
      <button type="submit" class="btn primary" [disabled]="saving">
         Guardar
      </button>
    </div>


  </form>
</div>
}
@if (!modelo){
    <p>Cargando...</p>
}