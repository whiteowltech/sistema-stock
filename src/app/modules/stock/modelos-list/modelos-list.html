<div class="modelos-list">
  <div class="header">
    <h2>Modelos</h2>
    <div class="actions-right">
      <input
        type="search"
        class="search"
        placeholder="Buscar modelo…"
        (input)="onSearch($any($event.target).value)"
      >
      <a class="btn primary" routerLink="/modelos/nuevo">+ Nuevo modelo</a>
    </div>
  </div>

  @if (loading()) {
    <div class="hint">Cargando…</div>
  } @else if (!filtered().length) {
    <div class="hint">No hay modelos que coincidan con la búsqueda.</div>
  } @else {
    <div class="tabla-wrapper">
      <table class="tabla-modulos">
        <thead>
          <tr>
            <th>Modelo</th>
            <th style="text-align:right">Pegamento</th>
            <th style="text-align:right">Plaqueta de carga</th>
            <th style="text-align:right">Alcohol 1 L</th>
            <th style="text-align:right">Alcohol 500 ml</th>
            <th style="text-align:right">Alcohol 250 ml</th>
            <th style="text-align:right">Tapa trasera</th>
            <th style="text-align:right">Pantalla / display</th>
            <th style="width:80px"></th>
          </tr>
        </thead>

        <tbody>
          @for (m of filtered(); track m.id) {
            <tr>
              <td>
                <a [routerLink]="['/modelos', m.id]" class="link">
                  {{ m.nombre }}
                </a>
              </td>

              <td style="text-align:right">{{ qty(m, 'pegamento') }}</td>
              <td style="text-align:right">{{ qty(m, 'plaqueta_carga') }}</td>
              <td style="text-align:right">{{ qty(m, 'alcohol_isopropilico', 1000) }}</td>
              <td style="text-align:right">{{ qty(m, 'alcohol_isopropilico', 500) }}</td>
              <td style="text-align:right">{{ qty(m, 'alcohol_isopropilico', 250) }}</td>
              <td style="text-align:right">{{ qty(m, 'tapa_trasera') }}</td>
              <td style="text-align:right">{{ qty(m, 'pantalla') }}</td>

              <td class="actions">
                <a class="btn tiny" [routerLink]="['/modelos', m.id]">Editar</a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
